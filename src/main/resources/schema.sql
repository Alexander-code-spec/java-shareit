DROP TABLE IF EXISTS Users, Items, Bookings, ItemRequests

CREATE TABLE IF NOT EXISTS Users(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR NOT NULL,
    email VARCHAR NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS Requests(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    description VARCHAR NOT NULL,
    requester_id REFERENCES Users(id) ON DELETE CASCADE,
    created DATE
)

CREATE TABLE IF NOT EXISTS Items(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR NOT NULL,
    description VARCHAR NOT NULL,
    available BOOLEAN NOT NULL DEFAULT FALSE,
    owner_id INTEGER REFERENCES Users(id) ON DELETE CASCADE NOT NULL,
    reuqest_id INTEGER REFERENCES Requests(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Bookings(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    start TIMESTAMP,
    end TIMESTAMP,
    item_id INTEGER REFERENCES Items(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES Users(id) ON DELETE CASCADE,
    status INTEGER
);